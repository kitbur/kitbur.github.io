{{ define "main" }}
<div class="max-w-4xl mx-auto px-4 py-12">

    <section class="mb-8">
        <h1 class="text-5xl font-bold mb-4 text-text-primary-light dark:text-text-primary-dark">{{ .Title }}</h1>
        
        <div class="flex flex-wrap items-center justify-between gap-4 pt-2">
            <div class="flex items-center gap-2 text-text-secondary-light dark:text-text-secondary-dark text-sm">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
            </div>
            <div class="flex flex-wrap gap-2">
                {{ with .Params.tags }}
                    {{ range . }}
                    <span class="px-3 py-1 text-xs bg-bg-primary-light dark:bg-bg-tertiary-dark text-text-secondary-light dark:text-text-secondary-dark border border-border-primary-light dark:border-border-primary-dark rounded-full">{{ . }}</span>
                    {{ end }}
                {{ end }}
            </div>
        </div>
    </section>

    <div class="bg-bg-primary-light dark:bg-bg-secondary-dark p-6 md:p-8 rounded-lg border border-border-primary-light dark:border-border-primary-dark">
        <article class="prose prose-lg dark:prose-invert max-w-none">
            {{ .Content }}
        </article>

        <div class="mt-12 pt-8 border-t border-border-secondary-light dark:border-border-secondary-dark text-center">
            <a href="{{ "blog/" | absLangURL }}" class="font-medium text-accent-light dark:text-accent-dark hover:underline">
                &larr; Back to All Posts
            </a>
        </div>
    </div>
</div>

<style>
/* --- General Prose Styling --- */
.prose {
    color: #374151;
    font-size: 1.1rem;
    line-height: 1.75;
}

html.dark .prose {
    color: #d1d5db;
}

.prose > :where(:not(hr)) + :where(:not(h1, h2, h3, h4, h5, h6)) {
    margin-top: 1.25rem;
}

/* --- Headings --- */
.prose h2 {
    font-size: 1.75rem;
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-weight: 700;
    line-height: 1.3;
    color: #111827;
}

html.dark .prose h2 {
    color: #f3f4f6;
}

.prose h3 {
    font-size: 1.5rem;
    margin-top: 1.75rem;
    margin-bottom: 0.875rem;
    font-weight: 600;
    line-height: 1.4;
    color: #111827;
}

html.dark .prose h3 {
    color: #f3f4f6;
}

.prose h4 {
    font-size: 1.25rem;
    margin-top: 1.5rem;
    margin-bottom: 0.625rem;
    font-weight: 500;
    line-height: 1.5;
    color: #374151;
}

html.dark .prose h4 {
    color: #d1d5db;
}

/* --- Lists --- */
.prose ul, .prose ol {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding-left: 1.5rem;
}

.prose li {
    margin-bottom: 0.5rem;
}

/* --- Code --- */
.prose code {
    font-size: 0.875em;
    border-radius: 0.3em;
    padding: 0.2em 0.4em;
    font-weight: 500;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.prose pre {
    padding: 1rem;
    border-radius: 0.25rem;
    overflow-x: auto;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-size: 0.875em;
    line-height: 1.5;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

html:not(.dark) .prose code {
    background-color: #e1e1e1;
    color: #44475a;
}

html.dark .prose code {
    background-color: #44475a;
    color: #e9e9e9;
}

.prose pre code {
    background-color: transparent !important;
    color: inherit !important;
    padding: 0 !important;
    font-size: inherit !important;
}

/* --- Blockquotes --- */
.prose blockquote {
    margin-left: 1.5rem;
    border-left: 0.25rem solid #cbd5e0;
    color: #718096;
    font-style: italic;
    padding-left: 1rem;
    margin-top: 1rem;
    margin-bottom: 1rem;
}

html.dark .prose blockquote {
    border-left-color: #94a3b8;
    color: #a1a1aa;
}

/* --- Horizontal Rule --- */
.prose hr {
    border-top: 1px solid #e5e7eb;
    margin-top: 2rem;
    margin-bottom: 2rem;
}

html.dark .prose hr {
    border-top-color: #374151;
}

/* --- Links --- */
.prose a {
    color: #0ea5e9; 
    text-decoration: underline;
    transition: color 0.15s ease-in-out;
}

.prose a:hover {
    color: #38bdf8; 
}

html.dark .prose a {
    color: #6dd5ed; 
}

html.dark .prose a:hover {
    color: #a5f3fc;
}

/* --- Images --- */
.prose img {
    max-width: 100%;
    margin-top: 1rem;
    margin-bottom: 1rem;
    border-radius: 0.25rem;
}
</style>
{{ end }}